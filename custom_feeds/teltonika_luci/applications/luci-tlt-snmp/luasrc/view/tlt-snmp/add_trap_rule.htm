<%
local uci = require "luci.model.uci".cursor()
local in_out = uci:get("hwinfo","hwinfo","in_out") or "0"
local show =  luci.tools.status.show_mobile()
local has_4pins = uci:get("hwinfo","hwinfo","4pin_io")

%>
<div class="cbi-section-create cbi-tblsection-create">
	<legend><%=translate("New Trap Rule")%></legend>
	<br />
	<table class="cbi-section-table" style="width:100%;">
		<tr class="cbi-section-table-descr">
			<th class="cbi-section-table-cell"><span onmouseout="HideHint(this)" onmouseover="ShowHint(this, '<%=translate('The action to be performed when a rule is met')%>')"</span><%=translate("Action")%></th>
			<th class="cbi-section-table-cell"></th>
		</tr>
		<tr class="cbi-section-table-row">
			<td class="cbi-section-table-cell" style="width:110px">
				<select class="cbi-input-select" id="_newinput.action" name="_newinput.action" style="float:left;">
					<% if show then %>
						<option value="sigEnb"><%=translate("Signal strength trap")%></option>
						<option value="conEnb"><%=translate("Connection type trap")%></option>
					<% end

					if in_out == "1" then %>
						<option value="digIn"><%=translate("Digital input trap")%></option>
						<option value="digOCIn"><%=translate("Digital isolated input trap")%></option>
					<% end %>
					<% if has_4pins == "1" then %>
						<option value="dig4PinIn"><%=translate("Digital 4PIN input trap")%></option>
					<% end %>
					<% if in_out == "1" then %>
						<option value="analog"><%=translate("Analog input trap")%></option>
						<option value="digOut"><%=translate("Digital output trap")%></option>
						<option value="digRelayOut"><%=translate("Digital relay output trap")%></option>
					<% end %>
					<% if has_4pins == "1" then %>
						<option value="dig4PinOut"><%=translate("Digital 4PIN output trap")%></option>
					<% end %>
				</select>
			</td>
			<td class="cbi-section-table-cell">
				<input type="submit" class="cbi-button cbi-button-add" name="cbi.cts.<%=self.config%>.<%=self.sectiontype%>.<%=section%>" value="<%:Add%>" />
			</td>
		</tr>
	</table>

</div>
